<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Телефона-телефона</title>
  <link rel="stylesheet" href="https://cdn.rawgit.com/Chalarangelo/mini.css/v3.0.1/dist/mini-default.min.css" />
  <link rel="stylesheet" href="/node_modules/intl-tel-input/build/css/intlTelInput.min.css">
  <link rel="stylesheet" href="./style.css">
</head>

<body class="page">
  <h1>Телефона-телефона</h2>
    <h2>International Telephone Input</h2>
    <input class="phone" type="tel">
    <button class="btn" type="button">Validate</button>
    <span class="valid-msg hide">✓ Valid</span>
    <span class="error-msg hide"></span>
</body>

<script src="./node_modules/intl-tel-input/build/js/intlTelInput.min.js"></script>
<script>
  const input = document.querySelector('.phone');
  const button = document.querySelector('.btn');
  const errorMsg = document.querySelector('.error-msg');
  const validMsg = document.querySelector('.valid-msg');

  const errorMap = ['Invalid number', 'Invalid country code', 'Too short', 'Too long', 'Invalid number'];

  const iti = window.intlTelInput(input, {
    utilsScript: '/node_modules/intl-tel-input/build/js/utils.js'
  });

  const reset = () => {
    input.classList.remove("error");
    errorMsg.innerHTML = "";
    errorMsg.classList.add("hide");
    validMsg.classList.add("hide");
  };

  button.addEventListener('click', () => {
    reset();
    if (input.value.trim()) {
      if (iti.isValidNumber()) {
        validMsg.classList.remove("hide");
      } else {
        input.classList.add("error");
        const errorCode = iti.getValidationError();
        errorMsg.innerHTML = errorMap[errorCode];
        errorMsg.classList.remove("hide");
      }
    }
  });

  input.addEventListener('keydown', (e) => {
    const key = e.charCode || e.keyCode || 0;
    if (!(key === 8 || key === 9 || key === 46 || (key >= 37 && key <= 40) || (key >= 48 && key <= 57) || (key >= 96 && key <= 105) || key === 107 || key === 109 || key === 173 || key === 61 || key === 187)) {

    }
  })

  input.addEventListener('change', reset);
  input.addEventListener('keyup', reset);




</script>

</html>