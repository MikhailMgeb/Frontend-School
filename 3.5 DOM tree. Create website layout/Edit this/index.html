<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Голодные клики</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mini.css/3.0.1/mini-default.min.css">
    <link rel="stylesheet" href="/style.css">
</head>

<body class="page">
    <article class="block-visa">
        <div class="block-visa__inner">
            <div class="block-visa__item name editable" data-number="1">Mikhail</div>
            <div class="block-visa__item editable"data-number="2">Mgebrishvili</div>
            <div class="block-visa__item editable" data-number="3">02/08/1992</div>
            <div class="block-visa__item editable" data-number="4">I want visa</div>
        </div>
    </article>

    <script>
        const editables = document.querySelectorAll('.editable');
        let dateAttribute = {};

        for (const editable of editables) {
            editable.addEventListener("dblclick", function (event) {
                dateAttribute[event.target.dataset.number] = editable.textContent;
                editable.innerHTML = '';

                const input = document.createElement('input');
                input.classList.add('add-text');
                editable.appendChild(input);

                const buttonEnterItem = document.createElement('button');
                buttonEnterItem.classList.add('button-enter');
                buttonEnterItem.textContent = '✓';
                const buttonCloseItem = document.createElement('button');
                buttonCloseItem.classList.add('button-close');
                buttonCloseItem.textContent = '✘';

                editable.appendChild(buttonEnterItem);
                editable.appendChild(buttonCloseItem);
            })

            const buttonEnter = document.querySelector('.button-enter');
            const buttonClose = document.querySelector('.button-close');

            editable.addEventListener('click', function (event) {
                const inputText = document.querySelector('.add-text');
                const target = event.target;

                if (target.closest('.button-enter')) {
                    editable.textContent = inputText.value;
                }

                if (target.closest('.button-close')) {
                    editable.textContent = dateAttribute[target.closest('.editable').dataset.number];
                }
            })
        }
    </script>
</body>

</html>