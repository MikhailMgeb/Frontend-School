<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пятизвездочная домашка</title>
    <link href="/style.css" rel="stylesheet">
</head>

<body class="page">
    <div class="rating">
        <img class="rating-star" data-number="1" src="/image/empty-star.svg">
        <img class="rating-star" data-number="2" src="/image/empty-star.svg">
        <img class="rating-star" data-number="3" src="/image/empty-star.svg">
        <img class="rating-star" data-number="4" src="/image/empty-star.svg">
        <img class="rating-star" data-number="5" src="/image/empty-star.svg">
    </div>
    <div class="rating">
        <img class="rating-star" data-number="1" src="/image/empty-star.svg">
        <img class="rating-star" data-number="2" src="/image/empty-star.svg">
        <img class="rating-star" data-number="3" src="/image/empty-star.svg">
        <img class="rating-star" data-number="4" src="/image/empty-star.svg">
        <img class="rating-star" data-number="5" src="/image/empty-star.svg">
    </div>
    <div class="rating">
        <img class="rating-star" data-number="1" src="/image/empty-star.svg">
        <img class="rating-star" data-number="2" src="/image/empty-star.svg">
        <img class="rating-star" data-number="3" src="/image/empty-star.svg">
        <img class="rating-star" data-number="4" src="/image/empty-star.svg">
        <img class="rating-star" data-number="5" src="/image/empty-star.svg">
    </div>
    <div class="rating">
        <img class="rating-star" data-number="1" src="/image/empty-star.svg">
        <img class="rating-star" data-number="2" src="/image/empty-star.svg">
        <img class="rating-star" data-number="3" src="/image/empty-star.svg">
        <img class="rating-star" data-number="4" src="/image/empty-star.svg">
        <img class="rating-star" data-number="5" src="/image/empty-star.svg">
    </div>
    <div class="rating">
        <img class="rating-star" data-number="1" src="/image/empty-star.svg">
        <img class="rating-star" data-number="2" src="/image/empty-star.svg">
        <img class="rating-star" data-number="3" src="/image/empty-star.svg">
        <img class="rating-star" data-number="4" src="/image/empty-star.svg">
        <img class="rating-star" data-number="5" src="/image/empty-star.svg">
    </div>
    <script>
        const state = {
            empty: "/image/empty-star.svg",
            focus: "/image/focus.svg",
            click: "/image/click.svg",
        };
        const ratings = document.querySelectorAll('.rating');

        function handleMouseenter(event) {
            const ratingStars = event.currentTarget.querySelectorAll('.rating-star');
            const star = event.target.closest('.rating-star');

            if (!star) {
                return;
            }

            for (let i = 0; i < 5; i++) {
                if (ratingStars[i].dataset.number <= star.dataset.number) {
                    ratingStars[i].src = state.focus;
                } else {
                    ratingStars[i].src = state.empty;
                }
            }
        }

        function handleClick(event) {
            const star = event.target.closest('.rating-star');
            const ratingStars = event.currentTarget.querySelectorAll('.rating-star');

            if (!star) {
                return;
            }

            for (let j = 0; j < ratingStars.length; j++) {
                if (ratingStars[j].dataset.number <= star.dataset.number) {
                    ratingStars[j].src = state.click;
                }
            }

            event.currentTarget.removeEventListener('mouseover', handleMouseenter);
            event.currentTarget.removeEventListener('click', handleClick);

        }

        for (let i = 0; i < ratings.length; i++) {
            ratings[i].addEventListener('mouseover', handleMouseenter);
            ratings[i].addEventListener('click', handleClick);
        }

    </script>
</body>

</html>